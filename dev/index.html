<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · YUVColorTypes</title><meta name="title" content="Introduction · YUVColorTypes"/><meta property="og:title" content="Introduction · YUVColorTypes"/><meta property="twitter:title" content="Introduction · YUVColorTypes"/><meta name="description" content="Documentation for YUVColorTypes."/><meta property="og:description" content="Documentation for YUVColorTypes."/><meta property="twitter:description" content="Documentation for YUVColorTypes."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.svg" alt="YUVColorTypes logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>YUVColorTypes</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Type-design"><span>Type design</span></a></li></ul></li><li><a class="tocitem" href="profiles/">Supported Profiles</a></li><li><a class="tocitem" href="addingprofiles/">Adding Profiles</a></li><li><a class="tocitem" href="api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/kimikage/YUVColorTypes.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/kimikage/YUVColorTypes.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="YUVColorTypes"><a class="docs-heading-anchor" href="#YUVColorTypes">YUVColorTypes</a><a id="YUVColorTypes-1"></a><a class="docs-heading-anchor-permalink" href="#YUVColorTypes" title="Permalink"></a></h1><p>This package is an add-on to <a href="https://github.com/JuliaGraphics/ColorTypes.jl">ColorTypes</a>, and supports <a href="https://en.wikipedia.org/wiki/Y%E2%80%B2UV">YUV</a>-like colors.</p><p>Unfortunately, the environment surrounding YUV-like colors has historically been confusing. In the first place, there is no consensus on even calling a color with one luminance component and two chroma components a YUV. Therefore, this package aims to handle well-defined and well-formed YUV-like colors in a &quot;reasonable&quot; manner.</p><p>This package does not provide a public API for the specific storage format of YUV colors. This is because YUV-like images are often used with chroma subsampling (e.g., YUV 4:2:0) and planar formats with channel-separated images.</p><p>Also, this package provides limited support for conversion between RGBs and YUVs, and does not provide general color management functionality.</p><h2 id="Type-design"><a class="docs-heading-anchor" href="#Type-design">Type design</a><a id="Type-design-1"></a><a class="docs-heading-anchor-permalink" href="#Type-design" title="Permalink"></a></h2><h3 id="Background"><a class="docs-heading-anchor" href="#Background">Background</a><a id="Background-1"></a><a class="docs-heading-anchor-permalink" href="#Background" title="Permalink"></a></h3><p>The ColorTypes.jl schemes for handling YUV-like colors include the following problems:</p><ol><li>There are various profiles.</li><li>ColorTypes.jl does not provide abstract types for specific color models, except for AbstractRGB.</li><li>YUV-like components are often normalized in the range [0, 256) instead of [0, 1] or [-0.5, 0.5).<ol><li>YUV-like components are often handled as integer types, especially <code>UInt8</code>.</li><li>FixedPointNumbers.jl v0.8 does not support <em>unsigned</em> <code>Fixed</code>.</li></ol></li><li>Alpha component should be normalized in the range [0, 1] like <code>ARGB</code>.</li></ol><p>YUVColorType.jl uses the following strategies to solve or mitigate the above problems.</p><ol><li>Use julia&#39;s parametric types and CICP (Coding-independent code points).</li><li>Add some abstract types such as <a href="api/#YUVColorTypes.AbstractYUV"><code>AbstractYUV</code></a>.</li><li>Make the range depend on bit depth instead of normalizing into [0, 1].</li><li>When the component type is an integer type, encode alpha implicitly as <code>Normed</code>.</li></ol><h3 id="YUV-type"><a class="docs-heading-anchor" href="#YUV-type">YUV type</a><a id="YUV-type-1"></a><a class="docs-heading-anchor-permalink" href="#YUV-type" title="Permalink"></a></h3><p>The actual type definition underlying YUVColorTypes is as follows:</p><pre><code class="language-julia hljs">struct YUV{T,P,U,R,D} &lt;: AbstractYUV{T}
    y::T
    u::T
    v::T
end</code></pre><p>It is worth noting that while <code>RGB</code> has a single type parameter <code>T</code> which specifies the type of the component, <a href="@ref"><code>YUV</code></a> has four additional type parameters.</p><p>Be prepared that this type may not work well because some of the downstream packages do not assume color types with type parameters other than the component type <code>T</code>.</p><p>In any case, the end-users do not need to be aware of the details of the type implementation, and it is undesirable to write codes relying on the internal implementation, since it may change in the future.</p><p><code>YUVColorTypes</code> provides several type aliases. For BT.601 625-line, the following type aliases are defined for opaque, i.e., without alpha, YCbCr.</p><ul><li><a href="api/#YUVColorTypes.YCbCrBT601_625"><code>YCbCrBT601_625</code></a></li><li><a href="api/#YUVColorTypes.YCbCr24BT601_625"><code>YCbCr24BT601_625</code></a></li><li><a href="api/#YUVColorTypes.YCbCr30BT601_625"><code>YCbCr30BT601_625</code></a></li><li><a href="api/#YUVColorTypes.YCbCr36BT601_625"><code>YCbCr36BT601_625</code></a></li><li><a href="api/#YUVColorTypes.YCbCr48BT601_625"><code>YCbCr48BT601_625</code></a></li></ul><p>The first alias is the basic type for which no bit depth is specified. Subsequent aliases are specified with component bit depths of 8, 10, 12, and 16 bits.</p><p>The bit depth specification changes the ranges of possible values for the components. The following five colors are different representations of the same color.</p><pre><code class="language-julia hljs">using YUVColorTypes

[
    YCbCrBT601_625(100, 80, 100),
    YCbCr24BT601_625(100, 80, 100),
    YCbCr30BT601_625(400, 320, 400),
    YCbCr36BT601_625(1600, 1280, 1600),
    YCbCr48BT601_625(25600, 20480, 25600),
]</code></pre><img src='data:image/svg+xml;utf-8,<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="125mm" height="25mm"
     viewBox="0 0 5 1" preserveAspectRatio="none"
     shape-rendering="crispEdges" stroke="none">
<rect width=".96" height=".96" x="0" y="0" fill="%233E960E" />
<rect width=".96" height=".96" x="1" y="0" fill="%233E960E" />
<rect width=".96" height=".96" x="2" y="0" fill="%233E960E" />
<rect width=".96" height=".96" x="3" y="0" fill="%233E960E" />
<rect width=".96" height=".96" x="4" y="0" fill="%233E960E" />
</svg>'/><p>Note that unlike <code>RGB24</code>, the types with bit depths are still parametric.</p><pre><code class="language-julia hljs">using FixedPointNumbers
[
    YCbCr24BT601_625{UInt8}(100, 200, 100), # `UInt8` is the default component type
    YCbCr24BT601_625{Int}(100, 200, 100),
    YCbCr24BT601_625{Q11f4}(100.5, 200.5, 100.5),
    YCbCr24BT601_625{Float32}(100.5, 200.5, 100.5),
]</code></pre><img src='data:image/svg+xml;utf-8,<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="100mm" height="25mm"
     viewBox="0 0 4 1" preserveAspectRatio="none"
     shape-rendering="crispEdges" stroke="none">
<rect width=".96" height=".96" x="0" y="0" fill="%23426AF3" />
<rect width=".96" height=".96" x="1" y="0" fill="%23426AF3" />
<rect width=".96" height=".96" x="2" y="0" fill="%23446AF5" />
<rect width=".96" height=".96" x="3" y="0" fill="%23446AF5" />
</svg>'/><p>Then, what is the difference between <code>YCbCrBT601_625</code> without specifying bit depth and <code>YCbCr24BT601_625</code>? In fact, they behave almost identically. The difference is the way the component type is determined in the conversion. <code>YCbCrBT601_625</code> attempts to maintain the precision. On the other hand, types with bit depth do not care about the fractional part or out-of-range values. (<strong>FIXME</strong>)</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; YCbCrBT601_625(YCbCr30BT601_625{UInt16}(401, 322, 403))</code><code class="nohighlight hljs ansi" style="display:block;">YCbCrBT601_625{Float32}(100.25, 80.5, 100.75)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; YCbCr24BT601_625(YCbCr30BT601_625{UInt16}(401, 322, 403))</code><code class="nohighlight hljs ansi" style="display:block;">YCbCr24BT601_625{Float32}(100.25, 80.5, 100.75)</code></pre></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="profiles/">Supported Profiles »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Sunday 14 April 2024 13:31">Sunday 14 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
